#include <stdio.h>
#include <vector>
#include <string>
#include <algorithm>
#include <iostream>

using namespace std;

// 위 w 아 y 앞 r 뒤 o 왼 g 오 b
//  U: 윗 면, D: 아랫 면, F: 앞 면, B: 뒷 면, L: 왼쪽 면, R: 오른쪽
// + 시계방향
// - 반시계방향
int n;

void rotate(char a[][12], char b[][12], char f, char d) { // 무슨 면, 방향
	if (f == 'U') {
		if (d == '+') { // 윗면을 시계방향으로 돌린다.
			char temp1 = a[0][2];
			char temp2 = a[1][2];
			char temp3 = a[2][2];
			a[0][2] = b[2][2];
			a[1][2] = b[1][2];
			a[2][2] = b[0][2];
			b[2][2] = a[2][6];
			b[1][2] = a[1][6];
			b[0][2] = a[0][6];
			a[2][6] = b[0][6];
			a[1][6] = b[1][6];
			a[0][6] = b[2][6];
			b[0][6] = temp1;
			b[1][6] = temp2;
			b[2][6] = temp3;
			// --
			a[2][3] = b[0][3];
			a[2][4] = b[0][4];
			a[2][5] = b[0][5];
			a[1][3] = b[1][3];
			a[1][4] = b[1][4];
			a[1][5] = b[1][5];
			a[0][3] = b[2][3];
			a[0][4] = b[2][4];
			a[0][5] = b[2][5];
			//--
			b[0][3] = a[0][3];
			b[0][4] = a[1][3];
			b[0][5] = a[2][3];
			b[1][3] = a[0][4];
			b[1][4] = a[1][4];
			b[1][5] = a[2][4];
			b[2][3] = a[0][5];
			b[2][4] = a[1][5];
			b[2][5] = a[2][5];
		} else {
			char temp1 = b[0][6];
			char temp2 = b[1][6];
			char temp3 = b[2][6];
			b[0][6] = a[2][6];
			b[1][6] = a[1][6];
			b[2][6] = a[0][6];
			a[2][6] = b[2][2];
			a[1][6] = b[1][2];
			a[0][6] = b[0][2];
			b[2][2] = a[0][2];
			b[1][2] = a[1][2];
			b[0][2] = a[2][2];
			a[0][2] = temp1;
			a[1][2] = temp2;
			a[2][2] = temp3;
			// --
			b[0][3] = a[2][3];
			b[0][4] = a[2][4];
			b[0][5] = a[2][5];
			b[1][3] = a[1][3];
			b[1][4] = a[1][4];
			b[1][5] = a[1][5];
			b[2][3] = a[0][3];
			b[2][4] = a[0][4];
			b[2][5] = a[0][5];
			//--
			a[0][3] = b[0][3];
			a[0][4] = b[1][3];
			a[0][5] = b[2][3];
			a[1][3] = b[0][4];
			a[1][4] = b[1][4];
			a[1][5] = b[2][4];
			a[2][3] = b[0][5];
			a[2][4] = b[1][5];
			a[2][5] = b[2][5];
		}
	} else if(f == 'D') {
		if (d == '-') {
			char temp1 = a[0][0];
			char temp2 = a[1][0];
			char temp3 = a[2][0];
			a[0][0] = b[2][0];
			a[1][0] = b[1][0];
			a[2][0] = b[0][0];
			b[2][0] = a[2][8];
			b[1][0] = a[1][8];
			b[0][0] = a[0][8];
			a[2][8] = b[0][8];
			a[1][8] = b[1][8];
			a[0][8] = b[2][8];
			b[0][8] = temp1;
			b[1][8] = temp2;
			b[2][8] = temp3;
			// --
			char t1 = b[2][11];
			char t2 = b[1][11];
			char t3 = b[0][11];
			char t4 = b[2][10];
			char t5 = b[1][10];
			char t6 = b[0][10];
			char t7 = b[2][9];
			char t8 = b[1][9];
			char t9 = b[0][9];
			b[0][11] = t1;
			b[0][10] = t2;
			b[0][9] = t3;
			b[1][11] = t4;
			b[1][10] = t5;
			b[1][9] = t6;
			b[2][11] = t7;
			b[2][10] = t8;
			b[2][9] = t9;
			// --
			a[0][11] = b[0][11];
			a[1][11] = b[0][10];
			a[2][11] = b[0][9];
			a[0][10] = b[1][11];
			a[1][10] = b[1][10];
			a[2][10] = b[1][9];
			a[0][9] = b[2][11];
			a[1][9] = b[2][10];
			a[2][9] = b[2][9];
		} else {
			char temp1 = b[0][8];
			char temp2 = b[1][8];
			char temp3 = b[2][8];
			b[0][8] = a[2][8];
			b[1][8] = a[1][8];
			b[2][8] = a[0][8];
			a[2][8] = b[2][0];
			a[1][8] = b[1][0];
			a[0][8] = b[0][0];
			b[2][0] = a[0][0];
			b[1][0] = a[1][0];
			b[0][0] = a[2][0];
			a[0][0] = temp1;
			a[1][0] = temp2;
			a[2][0] = temp3;
			// --
			// --
			char t1 = b[2][11];
			char t2 = b[1][11];
			char t3 = b[0][11];
			char t4 = b[2][10];
			char t5 = b[1][10];
			char t6 = b[0][10];
			char t7 = b[2][9];
			char t8 = b[1][9];
			char t9 = b[0][9];
			b[0][11] = t9;
			b[0][10] = t8;
			b[0][9] = t7;
			b[1][11] = t6;
			b[1][10] = t5;
			b[1][9] = t4;
			b[2][11] = t3;
			b[2][10] = t2;
			b[2][9] = t1;
			// --
			b[0][11] = a[0][11];
			b[1][11] = a[0][10];
			b[2][11] = a[0][9];
			b[0][10] = a[1][11];
			b[1][10] = a[1][10];
			b[2][10] = a[1][9];
			b[0][9] = a[2][11];
			b[1][9] = a[2][10];
			b[2][9] = a[2][9];
		}
	} else if(f == 'R') {
		if (d == '+') {
			char temp1 = a[2][0];
			char temp2 = a[2][1];
			char temp3 = a[2][2];
			a[2][0] = a[2][3];
			a[2][1] = a[2][4];
			a[2][2] = a[2][5];
			a[2][3] = a[2][6];
			a[2][4] = a[2][7];
			a[2][5] = a[2][8];
			a[2][6] = a[2][9];
			a[2][7] = a[2][10];
			a[2][8] = a[2][11];
			a[2][9] = temp1;
			a[2][10] = temp2;
			a[2][11] = temp3;
			// --
			b[0][9] = a[2][11];
			b[1][9] = a[2][10];
			b[2][9] = a[2][9];
			b[0][5] = a[2][3];
			b[1][5] = a[2][4];
			b[2][5] = a[2][5];
			// --
			char t1 = b[0][8];
			char t2 = b[1][8];
			char t3 = b[2][8];
			char t4 = b[0][7];
			char t5 = b[1][7];
			char t6 = b[2][7];
			char t7 = b[0][6];
			char t8 = b[1][6];
			char t9 = b[2][6];
			b[0][6] = t9;
			b[0][7] = t8;
			b[0][8] = t7;
			b[1][6] = t6;
			b[1][7] = t5;
			b[1][8] = t4;
			b[2][6] = t3;
			b[2][7] = t2;
			b[2][8] = t1;
		} else {
			char temp1 = a[2][11];
			char temp2 = a[2][10];
			char temp3 = a[2][9];
			a[2][11] = a[2][8];
			a[2][10] = a[2][7];
			a[2][9] = a[2][6];
			a[2][8] = a[2][5];
			a[2][7] = a[2][4];
			a[2][6] = a[2][3];
			a[2][5] = a[2][2];
			a[2][4] = a[2][1];
			a[2][3] = a[2][0];
			a[2][2] = temp1;
			a[2][1] = temp2;
			a[2][0] = temp3;
			// --
			b[0][9] = a[2][11];
			b[1][9] = a[2][10];
			b[2][9] = a[2][9];
			b[0][5] = a[2][3];
			b[1][5] = a[2][4];
			b[2][5] = a[2][5];
			// --
			char t1 = b[0][8];
			char t2 = b[1][8];
			char t3 = b[2][8];
			char t4 = b[0][7];
			char t5 = b[1][7];
			char t6 = b[2][7];
			char t7 = b[0][6];
			char t8 = b[1][6];
			char t9 = b[2][6];
			b[0][6] = t1;
			b[0][7] = t2;
			b[0][8] = t3;
			b[1][6] = t4;
			b[1][7] = t5;
			b[1][8] = t6;
			b[2][6] = t7;
			b[2][7] = t8;
			b[2][8] = t9;
		}
	} else if(f == 'L') {
		if (d == '+') {
			char temp1 = a[0][11];
			char temp2 = a[0][10];
			char temp3 = a[0][9];
			a[0][11] = a[0][8];
			a[0][10] = a[0][7];
			a[0][9] = a[0][6];
			a[0][8] = a[0][5];
			a[0][7] = a[0][4];
			a[0][6] = a[0][3];
			a[0][5] = a[0][2];
			a[0][4] = a[0][1];
			a[0][3] = a[0][0];
			a[0][2] = temp1;
			a[0][1] = temp2;
			a[0][0] = temp3;
			// --
			b[0][11] = a[0][11];
			b[1][11] = a[0][10];
			b[2][11] = a[0][9];
			b[0][3] = a[0][3];
			b[1][3] = a[0][4];
			b[2][3] = a[0][5];
			// --
			char t1 = b[0][2];
			char t2 = b[1][2];
			char t3 = b[2][2];
			char t4 = b[0][1];
			char t5 = b[1][1];
			char t6 = b[2][1];
			char t7 = b[0][0];
			char t8 = b[1][0];
			char t9 = b[2][0];
			b[0][0] = t9;
			b[0][1] = t8;
			b[0][2] = t7;
			b[1][0] = t6;
			b[1][1] = t5;
			b[1][2] = t4;
			b[2][0] = t3;
			b[2][1] = t2;
			b[2][2] = t1;
		} else {
			char temp1 = a[0][0];
			char temp2 = a[0][1];
			char temp3 = a[0][2];
			a[0][0] = a[0][3];
			a[0][1] = a[0][4];
			a[0][2] = a[0][5];
			a[0][3] = a[0][6];
			a[0][4] = a[0][7];
			a[0][5] = a[0][8];
			a[0][6] = a[0][7];
			a[0][7] = a[0][8];
			a[0][8] = a[0][9];
			a[0][9] = temp1;
			a[0][10] = temp2;
			a[0][11] = temp3;
			// --
			b[0][11] = a[0][11];
			b[1][11] = a[0][10];
			b[2][11] = a[0][9];
			b[0][3] = a[0][3];
			b[1][3] = a[0][4];
			b[2][3] = a[0][5];
			// --
			char t1 = b[0][2];
			char t2 = b[1][2];
			char t3 = b[2][2];
			char t4 = b[0][1];
			char t5 = b[1][1];
			char t6 = b[2][1];
			char t7 = b[0][0];
			char t8 = b[1][0];
			char t9 = b[2][0];
			b[0][0] = t1;
			b[0][1] = t2;
			b[0][2] = t3;
			b[1][0] = t4;
			b[1][1] = t5;
			b[1][2] = t6;
			b[2][0] = t7;
			b[2][1] = t8;
			b[2][2] = t9;
		}
	} else if(f == 'F') {
		if (d == '+') {
			char temp1 = b[2][11];
			char temp2 = b[2][10];
			char temp3 = b[2][9];
			b[2][11] = b[2][8];
			b[2][10] = b[2][7];
			b[2][9] = b[2][6];
			b[2][8] = b[2][5];
			b[2][7] = b[2][4];
			b[2][6] = b[2][3];
			b[2][5] = b[2][2];
			b[2][4] = b[2][1];
			b[2][3] = b[2][0];
			b[2][2] = temp1;
			b[2][1] = temp2;
			b[2][0] = temp3;
			// --
			a[0][9] = b[2][11];
			a[1][9] = b[2][10];
			a[2][9] = b[2][9];
			a[0][5] = b[2][3];
			a[1][5] = b[2][4];
			a[2][5] = b[2][5];
			// --
			char t1 = a[0][6];
			char t2 = a[1][6];
			char t3 = a[2][6];
			char t4 = a[0][7];
			char t5 = a[1][7];
			char t6 = a[2][7];
			char t7 = a[0][8];
			char t8 = a[1][8];
			char t9 = a[2][8];
			a[0][8] = t9;
			a[0][7] = t8;
			a[0][6] = t7;
			a[1][8] = t6;
			a[1][7] = t5;
			a[1][6] = t4;
			a[2][8] = t3;
			a[2][7] = t2;
			a[2][6] = t1;

		} else {
			char temp1 = b[2][0];
			char temp2 = b[2][1];
			char temp3 = b[2][2];
			b[2][0] = b[2][3];
			b[2][1] = b[2][4];
			b[2][2] = b[2][5];
			b[2][3] = b[2][6];
			b[2][4] = b[2][7];
			b[2][5] = b[2][8];
			b[2][6] = b[2][9];
			b[2][7] = b[2][10];
			b[2][8] = b[2][11];
			b[2][9] = temp1;
			b[2][10] = temp2;
			b[2][11] = temp3;
			// --
			a[0][9] = b[2][11];
			a[1][9] = b[2][10];
			a[2][9] = b[2][9];
			a[0][5] = b[2][3];
			a[1][5] = b[2][4];
			a[2][5] = b[2][5];
			//
			char t1 = a[0][6];
			char t2 = a[1][6];
			char t3 = a[2][6];
			char t4 = a[0][7];
			char t5 = a[1][7];
			char t6 = a[2][7];
			char t7 = a[0][8];
			char t8 = a[1][8];
			char t9 = a[2][8];
			a[0][8] = t1;
			a[0][7] = t2;
			a[0][6] = t3;
			a[1][8] = t4;
			a[1][7] = t5;
			a[1][6] = t6;
			a[2][8] = t7;
			a[2][7] = t8;
			a[2][6] = t9;
		}
	} else { // 뒤
		if (d == '-') {
			char temp1 = b[0][11];
			char temp2 = b[0][10];
			char temp3 = b[0][9];
			b[0][11] = b[0][8];
			b[0][10] = b[0][7];
			b[0][9] = b[0][6];
			b[0][8] = b[0][5];
			b[0][7] = b[0][4];
			b[0][6] = b[0][3];
			b[0][5] = b[0][2];
			b[0][4] = b[0][1];
			b[0][3] = b[0][0];
			b[0][2] = temp1;
			b[0][1] = temp2;
			b[0][0] = temp3;
			// --
			a[2][11] = b[0][11];
			a[1][11] = b[0][10];
			a[0][11] = b[0][9];
			a[0][3] = b[0][3];
			a[1][3] = b[0][4];
			a[2][3] = b[0][5];
			// --
			char t1 = a[0][0];
			char t2 = a[1][0];
			char t3 = a[2][0];
			char t4 = a[0][1];
			char t5 = a[1][1];
			char t6 = a[2][1];
			char t7 = a[0][2];
			char t8 = a[1][2];
			char t9 = a[2][2];
			a[0][2] = t9;
			a[0][1] = t8;
			a[0][0] = t7;
			a[1][2] = t6;
			a[1][1] = t5;
			a[1][0] = t4;
			a[2][2] = t3;
			a[2][1] = t2;
			a[2][0] = t1;
		} else {
			char temp1 = b[0][0];
			char temp2 = b[0][1];
			char temp3 = b[0][2];
			b[0][0] = b[0][3];
			b[0][1] = b[0][4];
			b[0][2] = b[0][5];
			b[0][3] = b[0][6];
			b[0][4] = b[0][7];
			b[0][5] = b[0][8];
			b[0][6] = b[0][9];
			b[0][7] = b[0][10];
			b[0][8] = b[0][11];
			b[0][9] = temp1;
			b[0][10] = temp2;
			b[0][11] = temp3;
			// --
			a[0][11] = b[0][11];
			a[1][11] = b[0][10];
			a[2][11] = b[0][9];
			a[0][3] = b[0][3];
			a[1][3] = b[0][4];
			a[2][3] = b[0][5];
			// --
			char t1 = a[0][0];
			char t2 = a[1][0];
			char t3 = a[2][0];
			char t4 = a[0][1];
			char t5 = a[1][1];
			char t6 = a[2][1];
			char t7 = a[0][2];
			char t8 = a[1][2];
			char t9 = a[2][2];
			a[0][2] = t1;
			a[0][1] = t2;
			a[0][0] = t3;
			a[1][2] = t4;
			a[1][1] = t5;
			a[1][0] = t6;
			a[2][2] = t7;
			a[2][1] = t8;
			a[2][0] = t9;
		}
	}
}

int main() {
	scanf("%d", &n);
	vector<pair<char, char>> v;

	for(int i = 0; i < n; ++i) {
		char a[3][12] = {
			{'o','o','o','w','w','w','r','r','r','y','y','y'},
			{'o','o','o','w','w','w','r','r','r','y','y','y'},
			{'o','o','o','w','w','w','r','r','r','y','y','y'}
		};
		char b[3][12] = {
			{'g','g','g','w','w','w','b','b','b','y','y','y'},
			{'g','g','g','w','w','w','b','b','b','y','y','y'},
			{'g','g','g','w','w','w','b','b','b','y','y','y'}
		};
		int m;
		scanf("%d", &m);
		for(int z = 0; z < m; ++z) {
			char d, dir;
			cin >> d >> dir;
			rotate(a, b, d, dir);
		}

		//for(int j = 0; j < v.size(); ++j) {
			//rotate(a, b, v[j].first, v[j].second);
		//}
		// 윗면 결과 출력
		for(int q = 0; q < 3; ++q) {
			for(int p = 3; p < 6; ++p) {
				printf("%c", b[q][p]);
			}
			printf("\n");
		}
		//v.clear();
	}
}
